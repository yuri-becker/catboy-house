---
- name: ğŸ“¦ Installs virtualenv
  ansible.builtin.apt:
    name: virtualenv
    state: present

- name: ğŸ“‚ Creates Services and venv directory
  ansible.builtin.file:
    path: "{{ play_venv }}"
    state: directory
    mode: "0644"

- name: ğŸ“‚ Creates virtualenv
  ansible.builtin.command: virtualenv {{ play_venv }}
  args:
    creates: "{{ play_venv }}/bin/activate"

- name: â¬†ï¸ Pushes python wrapper
  ansible.builtin.copy:
    src: pyenv
    dest: "{{ play_venv_interpreter }}"
    mode: "0755"

- name: ğŸ—ï¸ Installs dependencies
  ansible.builtin.pip:
    virtualenv: "{{ play_venv }}"
    name:
      - requests
      - pyyaml==5.3.1
      - docker
      - docker-compose
    state: present
