---
- name: Services
  hosts: all
  vars:
    ansible_python_interpreter: "{{ play_venv }}/bin/pyenv"
  module_defaults:
    community.postgresql.postgresql_db:
      login_host: 10.0.0.1
      login_port: "{{ postgres_port }}"
      login_user: "{{ postgres_user }}"
      login_password: "{{ postgres_password }}"
    community.postgresql.postgresql_user:
      login_host: 10.0.0.1
      login_port: "{{ postgres_port }}"
      login_user: "{{ postgres_user }}"
      login_password: "{{ postgres_password }}"
    community.postgresql.postgresql_privs:
      login_host: 10.0.0.1
      login_port: "{{ postgres_port }}"
      login_user: "{{ postgres_user }}"
      login_password: "{{ postgres_password }}"
    community.postgresql.postgresql_owner:
      login_host: 10.0.0.1
      login_port: "{{ postgres_port }}"
      login_user: "{{ postgres_user }}"
      login_password: "{{ postgres_password }}"

  roles:
    - role: caddy
      tags: caddy

    - role: auth
      tags: auth

    - role: watchtower
      tags: watchtower

    - role: unattended_upgrades
      tags: unattended_upgrades

    - role: grafana
      tags: grafana

    - role: paperless
      tags: paperless

    - role: linkding
      tags: linkding

    - role: mealie
      tags: mealie

    - role: nextcloud
      tags: nextcloud

    - role: romm
      tags: romm

    - role: pyload
      tags: pyload

    - role: jellyfin
      tags: jellyfin

    - role: seedbox
      tags: seedbox

    - role: arr
      tags: arr

    - role: heyform
      tags: heyform

    - role: backups
      tags: backups

    - role: wakapi
      tags: wakapi

    - role: docmost
      tags: docmost

    - role: website
      tags: website

    - role: search
      tags: search

    - role: stirlingpdf
      tags: stirlingpdf

    - role: woodpecker
      tags: woodpecker

    - role: navidrome
      tags: navidrome

    - role: satisfactory
      tags: satisfactory
